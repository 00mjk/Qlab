% Copyright 2010 Raytheon BBN Technologies
%
% Licensed under the Apache License, Version 2.0 (the "License");
% you may not use this file except in compliance with the License.
% You may obtain a copy of the License at
%
%     http://www.apache.org/licenses/LICENSE-2.0
%
% Unless required by applicable law or agreed to in writing, software
% distributed under the License is distributed on an "AS IS" BASIS,
% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
% See the License for the specific language governing permissions and
% limitations under the License.
%
% File: basename_input.m
%
% Description: Creates a GUI input for the device and experiment names

function value_fcn = basename_input(parent, position, deviceName, exptName)
    % FUNCTION file_counter
    % INPUTS:
    % parent - handle of parent window/figure
    % position - position vector of the form [left bottom]
    % deviceName - the initial device name
    % exptName - the initial experiment name
    
    % input error checking
    if ~exist('deviceName', 'var') || ~isstr(deviceName)
        deviceName = '';
    end
    if ~exist('exptName', 'var') || ~isstr(exptName)
        exptName = '';
    end
    
    height = 25;
    
    % display edit boxes in a row with labels above
    labelWidth = 60;
    deviceBoxWidth = 80;
    exptBoxWidth = 120;
    gutter = 10;
    deviceBoxPosition = [position(1) position(2) deviceBoxWidth height];
    deviceLabelPosition = deviceBoxPosition + [0 height-5 0 0];
    exptBoxPosition = [deviceBoxPosition(1)+deviceBoxWidth+gutter position(2) exptBoxWidth height];
    exptLabelPosition = exptBoxPosition + [0 height-5 0 0];

    % create label
    uicontrol( ...
            'Parent', parent, ...
            'Style', 'text', ...
            'Units', 'pixels', ...
            'Position', deviceLabelPosition, ...
            'FontName', 'Helvetica', ...
            'FontSize', 10, ...
            'String', 'Device Name');
        
    % create edit box
    deviceBox = uicontrol( ...
            'Parent', parent, ...
            'Style', 'edit', ...
			'BackgroundColor', 'white', ...
            'Units', 'pixels', ...
            'Position', deviceBoxPosition, ...
            'FontName', 'Helvetica', ...
            'FontSize', 10, ...
            'String', deviceName);
        
    % create label
    uicontrol( ...
            'Parent', parent, ...
            'Style', 'text', ...
            'Units', 'pixels', ...
            'Position', exptLabelPosition, ...
            'FontName', 'Helvetica', ...
            'FontSize', 10, ...
            'String', 'Experiment');

    % create edit box
    exptBox = uicontrol( ...
            'Parent', parent, ...
            'Style', 'edit', ...
			'BackgroundColor', 'white', ...
            'Units', 'pixels', ...
            'Position', exptBoxPosition, ...
            'FontName', 'Helvetica', ...
            'FontSize', 10, ...
            'String', exptName);
        
    value_fcn = @get_basename;
    
    function [device, expt] = get_basename
        device = get(deviceBox, 'String');
        expt = get(exptBox, 'String');
    end
end